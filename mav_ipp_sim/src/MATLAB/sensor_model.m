% Height-dependent sensor (classifier) model - causal
planning_params.classifier_altitudes = [50, 70, 100];
% Indexing: (class 1, class 2, class 3). Rows: predict, cols: true.
planning_params.classifier_conf_matrices(:,:,1) = ...
    [0.9614, 0.0219, 0.0166;
    0.2749, 0.7007, 0.0244;
    0.2769, 0.0430, 0.6801];
planning_params.classifier_conf_matrices(:,:,2) = ...
    [0.9815, 0.0138, 0.0047;
    0.3183, 0.6705, 0.0112;
    0.3778, 0.0483, 0.5739];
planning_params.classifier_conf_matrices(:,:,3) = ...
    [0.9766, 0.0224, 0.0010;
    0.5166, 0.4820, 0.0013;
    0.5232, 0.0865, 0.3903];
% Causal -> diagnostic.
conf_matrix = conf_matrix ./ repmat(sum(conf_matrix,1), ...
    [size(conf_matrix,2),1]);

% Height range to plot [m].
height = 40:0.1:160;

ind_altitude = zeros(size(height));

for i = 1:size(height,2)
    [~, ind_altitude(i)] = min(abs(planning_params.classifier_altitudes - height(i)));
end

%% Plotting %%

hold on
% plot(height, squeeze(planning_params.classifier_conf_matrices(2,2,ind_altitude)), ...
%     'Color', [0, 0.4470, 0.7410], 'LineWidth', 1.5)
% plot(height, squeeze(planning_params.classifier_conf_matrices(1,2,ind_altitude) + ...
%     planning_params.classifier_conf_matrices(3,2,ind_altitude)), ...
%     'Color', [0.8500, 0.3250, 0.0980], 'LineWidth', 1.5);
plot(height, squeeze(planning_params.classifier_conf_matrices(3,3,ind_altitude)), ...
    'Color', [0, 0.4470, 0.7410], 'LineWidth', 1.5);
plot(height, squeeze(planning_params.classifier_conf_matrices(1,3,ind_altitude) + ...
    planning_params.classifier_conf_matrices(2,3,ind_altitude)), ...
    'Color', [0.8500, 0.3250, 0.0980], 'LineWidth', 1.5);
hold off
h_legend = legend('1', '0');
set(h_legend, 'Position', [0.7333 0.7873 0.1386 0.0948]);
xlabel('Altitude (m)')
ylabel('Classif. probability')
axis([40 160 0 1])
set(gca, ...
    'FontName'    , 'Times'   , ...
    'Box'         , 'off'     , ...
    'TickDir'     , 'out'     , ...
    'TickLength'  , [.02 .02] , ...
    'XMinorTick'  , 'on'      , ...
    'YMinorTick'  , 'on'      , ...
    'YGrid'       , 'on'      , ...
    'XColor'      , [.3 .3 .3], ...
    'YColor'      , [.3 .3 .3], ...
    'YTick'       , 0:0.2:1, ...
    'LineWidth'   , 1         , ...
    'FontSize'    , 10.5);
pbaspect([1 1 1])
grid minor
set(gcf, 'Position', [-1563, 871, 354, 239])